option_settings:
  # Convert to load-balanced environment with Application Load Balancer
  aws:elasticbeanstalk:environment:
    EnvironmentType: LoadBalanced
    LoadBalancerType: application

  # Configure health check
  aws:elasticbeanstalk:environment:process:default:
    HealthCheckPath: /health
    Port: '8080'
    Protocol: HTTP
    HealthCheckInterval: '30'
    HealthyThresholdCount: '3'
    UnhealthyThresholdCount: '5'

  # HTTPS listener on port 443
  aws:elbv2:listener:443:
    Protocol: HTTPS
    SSLCertificateArns: arn:aws:acm:us-east-1:133528275554:certificate/c4b3c5fd-eb1d-41ba-ad79-679421a95c8d
    SSLPolicy: ELBSecurityPolicy-TLS13-1-2-2021-06

  # HTTP listener (will redirect to HTTPS)
  aws:elbv2:listener:default:
    ListenerEnabled: true
    Protocol: HTTP
